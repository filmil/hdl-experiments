This does not compile with nvc, but I think it should.

See: https://github.com/nickg/nvc/issues/1387

